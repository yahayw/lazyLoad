<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>lazyLoading</title>
    <style>
        ul,
        li {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .list.wrap {
            width: 600px;
            margin: 0 auto;
        }

        .clearfix:after {
            content: "";
            display: block;
            clear: both;
        }

        .list li {
            float: left;
            padding-right: 5px;
            padding-bottom: 10px;
        }

        .list img {
            width: 295px;
        }
    </style>
</head>

<body>
    <ul class="list wrap clearfix">
        <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" alt="img" data-src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg"></a></li>
        <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" alt="img" data-src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg"></a></li>
        <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" alt="img" data-src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg"></a></li>
        <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" alt="img" data-src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg"></a></li>
        <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" alt="img" data-src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg"></a></li>
        <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" alt="img" data-src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg"></a></li>
        <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" alt="img" data-src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg"></a></li>
        <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" alt="img" data-src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg"></a></li>
        <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" alt="img" data-src="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg"></a></li>
        <li><a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg" alt="img" data-src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg"></a></li>
    </ul>
    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
    <script>
        lazyLoad();
        var clock;
        $(window).on("scroll", function () {
            if (clock) {
                clearTimeout(clock);
            }
            clock = setTimeout(function () {
                lazyLoad();
            }, 100)
        })

        function lazyLoad() {
            $(".list img").each(function () {
                $this = $(this);
                if (isVisible($this) && !isLoaded($this)) {
                    loadImg($this);
                }
            })
        }

        function isVisible($img) {
            var offsetTop = $img.offset().top;
            var scrollTop = $(window).scrollTop();
            var windowHeight = $(window).height();
            if (offsetTop < scrollTop + windowHeight && offsetTop > scrollTop) {
                return true
            }
            return false;
        }

        function isLoaded($img) {
            return $img.attr("src") === $img.attr("data-src");
        }

        function loadImg($img) {
            $img.attr("src", $img.attr("data-src"));
        }
    </script>
</body>

</html>
